import{a as h}from"./call-bind-apply-helpers-DF82xm7-.js";import{l as N}from"./domelementtype-AVFTcEpP.js";var H={},a={},m=h&&h.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(o[f]=s[f])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),y=h&&h.__assign||function(){return y=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},y.apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0});a.cloneNode=a.hasChildren=a.isDocument=a.isDirective=a.isComment=a.isText=a.isCDATA=a.isTag=a.Element=a.Document=a.CDATA=a.NodeWithChildren=a.ProcessingInstruction=a.Comment=a.Text=a.DataNode=a.Node=void 0;var c=N,x=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),T(this,t)},e}();a.Node=x;var b=function(e){m(t,e);function t(n){var o=e.call(this)||this;return o.data=n,o}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(x);a.DataNode=b;var C=function(e){m(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=c.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(b);a.Text=C;var O=function(e){m(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=c.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(b);a.Comment=O;var D=function(e){m(t,e);function t(n,o){var s=e.call(this,o)||this;return s.name=n,s.type=c.ElementType.Directive,s}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(b);a.ProcessingInstruction=D;var g=function(e){m(t,e);function t(n){var o=e.call(this)||this;return o.children=n,o}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(x);a.NodeWithChildren=g;var P=function(e){m(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=c.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(g);a.CDATA=P;var w=function(e){m(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=c.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(g);a.Document=w;var j=function(e){m(t,e);function t(n,o,s,f){s===void 0&&(s=[]),f===void 0&&(f=n==="script"?c.ElementType.Script:n==="style"?c.ElementType.Style:c.ElementType.Tag);var d=e.call(this,s)||this;return d.name=n,d.attribs=o,d.type=f,d}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(o){var s,f;return{name:o,value:n.attribs[o],namespace:(s=n["x-attribsNamespace"])===null||s===void 0?void 0:s[o],prefix:(f=n["x-attribsPrefix"])===null||f===void 0?void 0:f[o]}})},enumerable:!1,configurable:!0}),t}(g);a.Element=j;function E(e){return(0,c.isTag)(e)}a.isTag=E;function I(e){return e.type===c.ElementType.CDATA}a.isCDATA=I;function _(e){return e.type===c.ElementType.Text}a.isText=_;function A(e){return e.type===c.ElementType.Comment}a.isComment=A;function S(e){return e.type===c.ElementType.Directive}a.isDirective=S;function M(e){return e.type===c.ElementType.Root}a.isDocument=M;function W(e){return Object.prototype.hasOwnProperty.call(e,"children")}a.hasChildren=W;function T(e,t){t===void 0&&(t=!1);var n;if(_(e))n=new C(e.data);else if(A(e))n=new O(e.data);else if(E(e)){var o=t?v(e.children):[],s=new j(e.name,y({},e.attribs),o);o.forEach(function(r){return r.parent=s}),e.namespace!=null&&(s.namespace=e.namespace),e["x-attribsNamespace"]&&(s["x-attribsNamespace"]=y({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(s["x-attribsPrefix"]=y({},e["x-attribsPrefix"])),n=s}else if(I(e)){var o=t?v(e.children):[],f=new P(o);o.forEach(function(i){return i.parent=f}),n=f}else if(M(e)){var o=t?v(e.children):[],d=new w(o);o.forEach(function(i){return i.parent=d}),e["x-mode"]&&(d["x-mode"]=e["x-mode"]),n=d}else if(S(e)){var u=new D(e.name,e.data);e["x-name"]!=null&&(u["x-name"]=e["x-name"],u["x-publicId"]=e["x-publicId"],u["x-systemId"]=e["x-systemId"]),n=u}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}a.cloneNode=T;function v(e){for(var t=e.map(function(o){return T(o,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=h&&h.__createBinding||(Object.create?function(u,r,i,l){l===void 0&&(l=i);var p=Object.getOwnPropertyDescriptor(r,i);(!p||("get"in p?!r.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(u,l,p)}:function(u,r,i,l){l===void 0&&(l=i),u[l]=r[i]}),n=h&&h.__exportStar||function(u,r){for(var i in u)i!=="default"&&!Object.prototype.hasOwnProperty.call(r,i)&&t(r,u,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var o=N,s=a;n(a,e);var f={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},d=function(){function u(r,i,l){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof i=="function"&&(l=i,i=f),typeof r=="object"&&(i=r,r=void 0),this.callback=r??null,this.options=i??f,this.elementCB=l??null}return u.prototype.onparserinit=function(r){this.parser=r},u.prototype.onreset=function(){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},u.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},u.prototype.onerror=function(r){this.handleCallback(r)},u.prototype.onclosetag=function(){this.lastNode=null;var r=this.tagStack.pop();this.options.withEndIndices&&(r.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(r)},u.prototype.onopentag=function(r,i){var l=this.options.xmlMode?o.ElementType.Tag:void 0,p=new s.Element(r,i,void 0,l);this.addNode(p),this.tagStack.push(p)},u.prototype.ontext=function(r){var i=this.lastNode;if(i&&i.type===o.ElementType.Text)i.data+=r,this.options.withEndIndices&&(i.endIndex=this.parser.endIndex);else{var l=new s.Text(r);this.addNode(l),this.lastNode=l}},u.prototype.oncomment=function(r){if(this.lastNode&&this.lastNode.type===o.ElementType.Comment){this.lastNode.data+=r;return}var i=new s.Comment(r);this.addNode(i),this.lastNode=i},u.prototype.oncommentend=function(){this.lastNode=null},u.prototype.oncdatastart=function(){var r=new s.Text(""),i=new s.CDATA([r]);this.addNode(i),r.parent=i,this.lastNode=r},u.prototype.oncdataend=function(){this.lastNode=null},u.prototype.onprocessinginstruction=function(r,i){var l=new s.ProcessingInstruction(r,i);this.addNode(l)},u.prototype.handleCallback=function(r){if(typeof this.callback=="function")this.callback(r,this.dom);else if(r)throw r},u.prototype.addNode=function(r){var i=this.tagStack[this.tagStack.length-1],l=i.children[i.children.length-1];this.options.withStartIndices&&(r.startIndex=this.parser.startIndex),this.options.withEndIndices&&(r.endIndex=this.parser.endIndex),i.children.push(r),l&&(r.prev=l,l.next=r),r.parent=i,this.lastNode=null},u}();e.DomHandler=d,e.default=d})(H);export{H as l};
